<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>
</head>
<body>
    <div id="calculator-wrapper">
        <div id="screen-wrapper">
            <span id="screen-output">80085</span>
        </div>

        <div id="button-container">
            <div id="number-wrapper">
                <div class="number-button">7</div>
                <div class="number-button">8</div>
                <div class="number-button">9</div>
                <div class="number-button">4</div>
                <div class="number-button">5</div>
                <div class="number-button">6</div>
                <div class="number-button">1</div>
                <div class="number-button">2</div>
                <div class="number-button">3</div>
                <div class="number-button">0</div>
                <div class="number-button" id="del" >Del</div>
                <div class="number-button" id="equal">=</div>
            </div>

            <div id="operator-wrapper">
                <div class="number-button operator-button">+</div>
                <div class="number-button operator-button">-</div>
                <div class="number-button operator-button">*</div>
                <div class="number-button operator-button">/</div>
            </div>
        </div>
</body>
<script  src="calcFunctions.js"></script>
<script>

    // On-screen writing
    let numbers = {
        numberA: "",
        numberB: "",
        operator: "",
        allowSecondNumber: false,
    };
    const numberButtons = document.querySelectorAll("#number-wrapper .number-button:not(#del):not(#equal)");

    numberButtons.forEach(button => {

        button.addEventListener("click", () => {
            if (!numbers.allowSecondNumber) {
                numbers.numberA += button.innerHTML;
                
                const screen = document.getElementById("screen-output");
                screen.innerHTML = numbers.numberA;
            } else {
                numbers.numberB += button.innerHTML;

                const screen = document.getElementById("screen-output");
                screen.innerHTML = numbers.numberB;
            }
            
        });
    });


    // Delete button
    const delButton = document.getElementById("del");

    delButton.addEventListener("click", () => {
        const screen = document.getElementById("screen-output");
        screen.innerHTML = "";


        clearMemory();
    });


    // Operator buttons
    const operatorButtons = document.querySelectorAll("#operator-wrapper .operator-button");

    operatorButtons.forEach(button => {

        button.addEventListener("click", () => {   
            const screen = document.getElementById("screen-output");

            if (!numbers.allowSecondNumber) {
                    screen.innerHTML = "";

                    numbers.operator = button.innerHTML;

                    numbers.allowSecondNumber = true;
                    
                // If the user presses the operator button with 2 numbers already loaded
                } else {

                    const numA = parseFloat(numbers.numberA);
                    const numB = parseFloat(numbers.numberB);

                    let result = operate(numA, numB, numbers.operator);

                    screen.innerHTML = result;
                    clearMemory();

                    // Load results as first number
                    numbers.numberA = result;
                    numbers.operator = button.innerHTML;
                    numbers.allowSecondNumber = true;
                }
        });
    });

    // Equal button
    const equalButton = document.getElementById("equal");

    equalButton.addEventListener("click", () => {
        const screen = document.getElementById("screen-output");

        const numA = parseFloat(numbers.numberA);
        const numB = parseFloat(numbers.numberB);

        let result = operate(numA, numB, numbers.operator);

        screen.innerHTML = result;
        clearMemory();
        numbers.numberA = result;

    });

</script>

</html>